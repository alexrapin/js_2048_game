{"mappings":"A,S,E,C,C,C,E,C,A,M,G,E,E,M,A,G,C,E,E,M,A,E,I,I,E,E,E,A,M,G,E,E,I,C,C,E,C,C,C,E,C,O,C,C,S,E,C,E,O,A,S,C,E,G,M,O,C,G,O,E,E,E,I,A,S,C,E,G,A,a,O,Q,A,M,C,C,O,Q,C,E,A,M,C,C,a,C,O,M,I,C,E,E,I,A,S,C,C,C,E,G,G,G,A,U,O,E,O,E,E,G,I,E,O,S,C,Q,C,I,C,G,K,C,E,I,G,W,G,E,W,E,C,E,E,W,C,I,A,E,A,Q,G,A,Q,E,O,M,I,C,G,G,A,c,G,2C,I,C,G,O,E,E,G,E,I,A,W,M,A,U,wI,G,CCIA,IAAI,EAAQ,EAAI,MAAM,EAAa,GAAG,CAAC,WAAM,MAAA,MAAM,CAAY,IAAI,CAAC,E,GAChE,EAAQ,EACR,EAAQ,CAAA,EACN,EAAQ,SAAS,gBAAgB,CAAC,eAClC,EAAc,SAAS,cAAc,CAAC,gBACtC,EAAc,CAAC,YAAa,aAAc,UAAW,YAAY,CACjE,EAAU,CACd,MAAO,SAAS,cAAc,CAAC,iBAC/B,KAAM,SAAS,cAAc,CAAC,gBAC9B,IAAK,SAAS,cAAc,CAAC,cAC/B,EAEA,EAAY,gBAAgB,CAAC,QAE7B,WACE,IACA,IACA,EAAe,GACf,EAAe,GACf,EAAU,EAAO,EACnB,GAEA,IAAM,EAAY,WAChB,EAAQ,EACR,EAAQ,CAAA,EACR,SAAS,aAAa,CAAC,eAAe,SAAS,CAAG,EAClD,EAAS,EAAG,MAAM,EAAa,GAAG,CAAC,WAAM,MAAA,MAAM,CAAY,IAAI,CAAC,E,GAChE,EAAQ,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,UAC1B,EAAQ,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAC7B,EAEA,SAAS,EAAe,CAAU,EAChC,IAAM,EAAa,EAAE,CAQrB,GANA,EAAW,OAAO,CAAC,SAAC,CAAA,CAAK,CAAzB,EACE,EAAI,OAAO,CAAC,SAAC,CAAA,CAAO,CAApB,EACE,AAAU,IAAV,GAAe,EAAW,IAAI,CAAC,CAAE,SAAA,EAAU,SAAA,CAAS,EACtD,EACF,GAEI,EAAW,MAAM,CAAG,EAAG,CACzB,IAAM,EAAc,KAAK,KAAK,CAAC,KAAK,MA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","sources":["<anon>","src/scripts/main.js"],"sourcesContent":["/* eslint-disable object-curly-newline */ \"use strict\";\nfunction _array_like_to_array(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];\n    return arr2;\n}\nfunction _array_without_holes(arr) {\n    if (Array.isArray(arr)) return _array_like_to_array(arr);\n}\nfunction _iterable_to_array(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _non_iterable_spread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _to_consumable_array(arr) {\n    return _array_without_holes(arr) || _iterable_to_array(arr) || _unsupported_iterable_to_array(arr) || _non_iterable_spread();\n}\nfunction _unsupported_iterable_to_array(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _array_like_to_array(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(n);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array(o, minLen);\n}\nvar SIZE_BOARD = 4;\nvar board = _to_consumable_array(Array(SIZE_BOARD)).map(function() {\n    return Array(SIZE_BOARD).fill(0);\n});\nvar score = 0;\nvar isWin = false;\nvar cells = document.querySelectorAll(\".field-cell\");\nvar startButton = document.getElementById(\"start-button\");\nvar allowedKeys = [\n    \"ArrowLeft\",\n    \"ArrowRight\",\n    \"ArrowUp\",\n    \"ArrowDown\"\n];\nvar message = {\n    Start: document.getElementById(\"message-start\"),\n    Lose: document.getElementById(\"message-lose\"),\n    Win: document.getElementById(\"message-win\")\n};\nstartButton.addEventListener(\"click\", startGame);\nfunction startGame() {\n    resetGame();\n    changeButton();\n    addRandomField(board);\n    addRandomField(board);\n    drawBoard(board, cells);\n}\nvar resetGame = function() {\n    score = 0;\n    isWin = false;\n    document.querySelector(\".game-score\").innerText = score;\n    board = _to_consumable_array(Array(SIZE_BOARD)).map(function() {\n        return Array(SIZE_BOARD).fill(0);\n    });\n    message.Win.classList.add(\"hidden\");\n    message.Lose.classList.add(\"hidden\");\n};\nfunction addRandomField(boardArray) {\n    var emptyCells = [];\n    boardArray.forEach(function(row, rowIndex) {\n        row.forEach(function(value, colIndex) {\n            value === 0 && emptyCells.push({\n                rowIndex: rowIndex,\n                colIndex: colIndex\n            });\n        });\n    });\n    if (emptyCells.length > 0) {\n        var randomIndex = Math.floor(Math.random() * emptyCells.length);\n        var randomCell = emptyCells[randomIndex];\n        boardArray[randomCell.rowIndex][randomCell.colIndex] = Math.random() < 0.9 ? 2 : 4;\n    }\n}\nvar drawBoard = function(boardArray, curCells) {\n    boardArray.forEach(function(row, rowInd) {\n        row.forEach(function(value, colInd) {\n            var cell = curCells[rowInd * boardArray.length + colInd];\n            if (value > 0) {\n                cell.textContent = value;\n                cell.classList = \"field-cell\" + \" field-cell--\".concat(value);\n            } else {\n                cell.textContent = null;\n                cell.classList = \"field-cell\";\n            }\n        });\n    });\n};\nvar changeButton = function() {\n    startButton.classList += \" restart\";\n    startButton.innerText = \"Restart\";\n    startButton.style = \"border: 2px solid red; color: #776e65; outline: none;\";\n    message.Start.classList.add(\"hidden\");\n};\ndocument.addEventListener(\"keyup\", function(e) {\n    if (!allowedKeys.includes(e.key) || isWin) return;\n    var prevBoard = JSON.parse(JSON.stringify(board));\n    switch(e.key){\n        case \"ArrowLeft\":\n            slideLeft();\n            getWinMessage(board);\n            getLoseMessage(board);\n            break;\n        case \"ArrowRight\":\n            slideRight();\n            getWinMessage(board);\n            getLoseMessage(board);\n            break;\n        case \"ArrowUp\":\n            slideUp();\n            getWinMessage(board);\n            getLoseMessage(board);\n            break;\n        case \"ArrowDown\":\n            slideDown();\n            getWinMessage(board);\n            getLoseMessage(board);\n            break;\n        default:\n            break;\n    }\n    document.querySelector(\".game-score\").innerText = score;\n    if (isMoved(prevBoard)) {\n        addRandomField(board);\n        drawBoard(board, cells);\n    }\n});\nvar isMoved = function(prevBoard) {\n    for(var r = 0; r < SIZE_BOARD; r++)for(var c = 0; c < SIZE_BOARD; c++){\n        if (prevBoard[r][c] !== board[r][c]) return true;\n    }\n    return false;\n};\nvar slideLeft = function() {\n    board = board.map(function(row) {\n        return slide(row);\n    });\n};\nvar slideRight = function() {\n    board = board.map(function(row) {\n        return slide(row.reverse()).reverse();\n    });\n};\nfunction slideUp() {\n    var columns = prepareColumns(board);\n    board = prepareColumns(columns.map(function(col) {\n        return slide(col);\n    }));\n}\nfunction slideDown() {\n    var columns = prepareColumns(board);\n    columns = columns.map(function(col) {\n        return slide(col.reverse()).reverse();\n    });\n    board = prepareColumns(columns);\n}\nvar deleteZeros = function(row) {\n    return row.filter(Boolean);\n};\nvar slide = function(row) {\n    var rowClear = deleteZeros(row);\n    var newRow = rowClear;\n    for(var i = 0; i < newRow.length - 1; i++)if (newRow[i] === newRow[i + 1]) {\n        newRow[i] *= 2;\n        newRow[i + 1] = 0;\n        score += newRow[i];\n    }\n    newRow = deleteZeros(newRow);\n    while(newRow.length < 4)newRow.push(0);\n    return newRow;\n};\nfunction prepareColumns(boardArr) {\n    return boardArr.map(function(row, rowInd, rowArr) {\n        return row.map(function(_, colInd) {\n            return rowArr[colInd][rowInd];\n        });\n    });\n}\nvar getWinMessage = function(boardArray) {\n    boardArray.forEach(function(row) {\n        row.forEach(function(cell) {\n            if (cell >= 2048) {\n                isWin = true;\n                message.Start.classList.remove(\"hidden\");\n            }\n        });\n    });\n};\nfunction getLoseMessage() {\n    if (isBoardFull() && !canMakeMove()) message.Lose.classList.remove(\"hidden\");\n}\nfunction isBoardFull() {\n    return board.every(function(row) {\n        return row.every(function(tile) {\n            return tile !== 0;\n        });\n    });\n}\nfunction canMakeMove() {\n    for(var r = 0; r < SIZE_BOARD; r++)for(var c = 0; c < SIZE_BOARD; c++){\n        var value = board[r][c];\n        if (value !== 0) {\n            if (r < 3 && value === board[r + 1][c]) return true;\n            if (c < 3 && value === board[r][c + 1]) return true;\n        }\n    }\n    return false;\n}\n\n//# sourceMappingURL=index.5c281691.js.map\n","/* eslint-disable object-curly-newline */\n'use strict';\n\nconst SIZE_BOARD = 4;\nlet board = [...Array(SIZE_BOARD)].map(() => Array(SIZE_BOARD).fill(0));\nlet score = 0;\nlet isWin = false;\nconst cells = document.querySelectorAll('.field-cell');\nconst startButton = document.getElementById('start-button');\nconst allowedKeys = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'];\nconst message = {\n  Start: document.getElementById('message-start'),\n  Lose: document.getElementById('message-lose'),\n  Win: document.getElementById('message-win'),\n};\n\nstartButton.addEventListener('click', startGame);\n\nfunction startGame() {\n  resetGame();\n  changeButton();\n  addRandomField(board);\n  addRandomField(board);\n  drawBoard(board, cells);\n}\n\nconst resetGame = () => {\n  score = 0;\n  isWin = false;\n  document.querySelector('.game-score').innerText = score;\n  board = [...Array(SIZE_BOARD)].map(() => Array(SIZE_BOARD).fill(0));\n  message.Win.classList.add('hidden');\n  message.Lose.classList.add('hidden');\n};\n\nfunction addRandomField(boardArray) {\n  const emptyCells = [];\n\n  boardArray.forEach((row, rowIndex) => {\n    row.forEach((value, colIndex) => {\n      value === 0 && emptyCells.push({ rowIndex, colIndex });\n    });\n  });\n\n  if (emptyCells.length > 0) {\n    const randomIndex = Math.floor(Math.random() * emptyCells.length);\n    const randomCell = emptyCells[randomIndex];\n\n    boardArray[randomCell.rowIndex][randomCell.colIndex]\n      = Math.random() < 0.9 ? 2 : 4;\n  }\n}\n\nconst drawBoard = (boardArray, curCells) => {\n  boardArray.forEach((row, rowInd) => {\n    row.forEach((value, colInd) => {\n      const cell = curCells[rowInd * boardArray.length + colInd];\n\n      if (value > 0) {\n        cell.textContent = value;\n        cell.classList = 'field-cell' + ` field-cell--${value}`;\n      } else {\n        cell.textContent = null;\n        cell.classList = 'field-cell';\n      }\n    });\n  });\n};\n\nconst changeButton = () => {\n  startButton.classList += ' restart';\n  startButton.innerText = 'Restart';\n  startButton.style = 'border: 2px solid red; color: #776e65; outline: none;';\n  message.Start.classList.add('hidden');\n};\n\ndocument.addEventListener('keyup', e => {\n  if (!allowedKeys.includes(e.key) || isWin) {\n    return;\n  }\n\n  const prevBoard = JSON.parse(JSON.stringify(board));\n\n  switch (e.key) {\n    case 'ArrowLeft':\n      slideLeft();\n      getWinMessage(board);\n      getLoseMessage(board);\n      break;\n\n    case 'ArrowRight':\n      slideRight();\n      getWinMessage(board);\n      getLoseMessage(board);\n      break;\n\n    case 'ArrowUp':\n      slideUp();\n      getWinMessage(board);\n      getLoseMessage(board);\n      break;\n\n    case 'ArrowDown':\n      slideDown();\n      getWinMessage(board);\n      getLoseMessage(board);\n      break;\n\n    default:\n      break;\n  }\n\n  document.querySelector('.game-score').innerText = score;\n\n  if (isMoved(prevBoard)) {\n    addRandomField(board);\n    drawBoard(board, cells);\n  }\n});\n\nconst isMoved = (prevBoard) => {\n  for (let r = 0; r < SIZE_BOARD; r++) {\n    for (let c = 0; c < SIZE_BOARD; c++) {\n      if (prevBoard[r][c] !== board[r][c]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\nconst slideLeft = () => {\n  board = board.map(row => slide(row));\n};\n\nconst slideRight = () => {\n  board = board.map(row => slide(row.reverse()).reverse());\n};\n\nfunction slideUp() {\n  const columns = prepareColumns(board);\n\n  board = prepareColumns(columns.map(col => slide(col)));\n}\n\nfunction slideDown() {\n  let columns = prepareColumns(board);\n\n  columns = columns.map(col => slide(col.reverse()).reverse());\n\n  board = prepareColumns(columns);\n};\n\nconst deleteZeros = row => row.filter(Boolean);\n\nconst slide = row => {\n  const rowClear = deleteZeros(row);\n  let newRow = rowClear;\n\n  for (let i = 0; i < newRow.length - 1; i++) {\n    if (newRow[i] === newRow[i + 1]) {\n      newRow[i] *= 2;\n      newRow[i + 1] = 0;\n      score += newRow[i];\n    }\n  }\n  newRow = deleteZeros(newRow);\n\n  while (newRow.length < 4) {\n    newRow.push(0);\n  }\n\n  return newRow;\n};\n\nfunction prepareColumns(boardArr) {\n  return boardArr.map((row, rowInd, rowArr) => {\n    return row.map((_, colInd) => {\n      return rowArr[colInd][rowInd];\n    });\n  });\n}\n\nconst getWinMessage = (boardArray) => {\n  boardArray.forEach(row => {\n    row.forEach(cell => {\n      if (cell >= 2048) {\n        isWin = true;\n        message.Start.classList.remove('hidden');\n      }\n    });\n  });\n};\n\nfunction getLoseMessage() {\n  if (isBoardFull() && !canMakeMove()) {\n    message.Lose.classList.remove('hidden');\n  }\n};\n\nfunction isBoardFull() {\n  return board.every(row => row.every(tile => tile !== 0));\n}\n\nfunction canMakeMove() {\n  for (let r = 0; r < SIZE_BOARD; r++) {\n    for (let c = 0; c < SIZE_BOARD; c++) {\n      const value = board[r][c];\n\n      if (value !== 0) {\n        if (r < 3 && value === board[r + 1][c]) {\n          return true;\n        };\n\n        if (c < 3 && value === board[r][c + 1]) {\n          return true;\n        };\n      }\n    }\n  }\n\n  return false;\n}\n"],"names":["_array_like_to_array","arr","len","length","i","arr2","Array","_to_consumable_array","_array_without_holes","isArray","_iterable_to_array","iter","Symbol","iterator","from","_unsupported_iterable_to_array","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","_non_iterable_spread","TypeError","board","map","fill","score","isWin","cells","document","querySelectorAll","startButton","getElementById","allowedKeys","message","Start","Lose","Win","addEventListener","resetGame","changeButton","addRandomField","drawBoard","querySelector","innerText","classList","add","boardArray","emptyCells","forEach","row","rowIndex","value","colIndex","push","randomIndex","Math","floor","random","randomCell","curCells","rowInd","colInd","cell","textContent","concat","style","e","includes","key","columns","prevBoard","JSON","parse","stringify","slideLeft","getWinMessage","getLoseMessage","slideRight","prepareColumns","col","slide","reverse","isMoved","r","c","deleteZeros","filter","Boolean","newRow","boardArr","rowArr","_","remove","every","tile","canMakeMove"],"version":3,"file":"index.5c281691.js.map"}